<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
		<th:block th:insert="/common/common.html::head" />
		<link rel="stylesheet" href="/css/home/homes.css">
	</head>
	<body>
		<header id="whitetype">
		<div class="index-view-size">
			<th:block th:replace="~{/common/header::whitetype(~{this::homeMain})}">
				<div class="search" th:fragment="homeMain">
					<div class="flex search-detail">
						<div><input type="text" placeholder="위치"></div>
						<div><input type="date" placeholder=체크인></div>
						<div><input type="date" placeholder="체크아웃"></div>
						<div>
							<input type="text" placeholder="인원">
							<a><img src="/image/search-01.png" width="30px"></a>
						</div>
					</div>
				</div>
			</th:block>
		</div>
		</header>
		
		<section id="filter-menu">
			<div class="flex index-view-size">
				<div class="flex">
					<ul class="flex">
						<li><button class="price-range">요금</button></li>
						<li><button class="room-type">숙소유형</button></li>
					</ul>
					<ul class="filter flex">
						<li><button>주방</button></li>
						<li><button>무선인터넷</button></li>
						<li><button>세탁기</button></li>
					</ul>
				</div>
			</div>
		</section>
		
		<main class="flex between index-view-size">
			<section class="left-main">
				<div id="home-list">
					<div class="home-list" th:each="homes:${homes}">
						<h1>집정보</h1>
						<input type="hidden" id="homeAddress" th:value="${homes.homeAddress}">
						<div class="flex between">
							<div><img src="/image/room-img-01.jpg" width="300px" height="200px"></div>
							<div class="home-info">
								<div>
									<ul>
										<li class="home-type">[[${homes.homeType.homeType}]]</li>
										<li id="homeName" class="home-name"><a th:href="|/home/detail/${homes.hno}|">[[${homes.homeName}]]</a></li>
										<li class="home-number">
											<div class="flex">
												<div>최대인원 <span>[[${homes.maximumNumber}]]</span>명</div>
												<div>침대 <span>[[${homes.bedNumber}]]</span>개</div>
												<div>침실 <span>[[${homes.bedroomNumber}]]</span>개</div>
												<div>욕실 <span>[[${homes.bathroomNumber}]]</span>개</div>
											</div>
										</li>
										<li class="home-filter">
											<span th:each="ho : ${homes.homeOptionSet}">[[${ho.homeOption}]]</span>
										</li>
									</ul>
									<ul class="home-price">
										<li>[[${#numbers.formatInteger(homes.homePrice,3,'COMMA')}]]원&nbsp;<span>/박</span></li>
									</ul>
								</div>
							</div>
							<div class="home-comment">
								<ul class="flex end">
									<li>별점</li>
									<li>(후기)</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				
				<div id="paging" >
					<div th:if="${paging}" >
	        			<span th:if="${paging.from gt 1}">
	        				<a href="/home/list?page=1">&lt;&lt;</a>
	        				<a th:href="|/home/list?page=${paging.from-1}|">&lt;</a>
	        			</span>
	        			<span th:each="paging:${#numbers.sequence( paging.from , paging.to)}">
	        				<a th:href="|/home/list?page=${paging}|">[[${paging}]]</a>
	        			</span>
	        			<span th:if="${paging.to lt paging.pageTotal}">
	        				<a th:href="|/home/list?page=${paging.to+1}|">&gt;</a>
	        				<a th:href="|/home/list?page=${paging.pageTotal}|">&gt;&gt;</a>
	        			</span>
	        		</div>
				</div>
			</section>
			
			<section>
				<div id="map"></div>
			</section>
			<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=44c331bb2848d75067011ce7a893d31f&libraries=services"></script>
			
			<script th:inline="javascript">
			
			var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
		    mapOption = {
		        center: new kakao.maps.LatLng(37.6568255, 127.021725), // 지도의 중심좌표
		        level: 6 // 지도의 확대 레벨
		    };  

			// 지도를 생성합니다    
			var map = new kakao.maps.Map(mapContainer, mapOption); 
	
			[# th:each="homes : ${homes}"];
			
			
			var homeAddress=[[${homes.homeAddress}]];
			var geocoder = new kakao.maps.services.Geocoder();
			var imageSrc = "/image/airbnb_marker.png"; 
			
			// 주소로 좌표를 검색합니다
			geocoder.addressSearch(homeAddress, function(result, status) {

			    // 정상적으로 검색이 완료됐으면 
			     if (status === kakao.maps.services.Status.OK) {

			        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

			        var imageSize = new kakao.maps.Size(50, 60); 
			        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
			        
			        // 결과값으로 받은 위치를 마커로 표시합니다
			        var marker = new kakao.maps.Marker({
			            map: map,
			            position: coords,
			            image : markerImage
			        });
			        //지도에 a 태그 표시
			        {}

			        map.setCenter(coords);
			        
			    } 
			}); 
			
			
			[/]
			
			
			
			</script>
			
		</main>
		
		<footer>
			<th:block th:insert="/common/footer::footer"/>	
		</footer>
	</body>
</html>