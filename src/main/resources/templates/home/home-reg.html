<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
		<th:block th:insert="/common/common.html::head" />
		<link rel="stylesheet" href="/css/home/home-reg.css">
		<link rel="stylesheet" href="/css/common/header-nav.css">
		<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	</head>
	<body>
	<header id="whitetype">
	<div class="view-size">
	<th:block th:replace="~{/common/header::whitetype(~{this::homeMain})}">
		<div class="search" th:fragment="homeMain">
			<div class="big-search" th:fragment="indexMain">
				<ul class="flex">
					<li><a href="/home/list">숙소</a></li> 
					<li><a href="#">체험</a></li>
					<li><a href="#">온라인체험</a></li>
				</ul>
			</div>
		</div>
	</th:block>
	</div>
	</header>
		
		<main>
			<section id="home-reg">
				<div class="home-reg home-reg-view-size">
					<form action="/home/reg" method="post">
						<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
						<div>
							<div>
								<p>숙소정보</p>
								<input name="homeName" type="text" placeholder="숙소 이름을 입력하세요">
								<input id="address" name="homeAddress" type="text" placeholder="주소를 입력하세요" autocomplete="off" required="required">
								<input type="text" id="detailAddress" placeholder="상세주소를 입력하세요" autocomplete="off">
								<input type="hidden" id="postcode" placeholder="우편번호">
								<input type="hidden" id="extraAddress" placeholder="참고항목">
							</div>
							<div>
								<p>숙소가격</p>
								<div class="homePrice flex between">
									<input name="homePrice" type="text" placeholder="숙소 요금을 입력하세요">
									<p>/ 박</p>
								</div>
							</div>
							<div>
								<p>숙소상세정보</p>
								<div class="home-detail-number flex between">
									<input name="maximumNumber" type="text" placeholder="최대 인원">
									<input name="bedNumber" type="text" placeholder="침대 개수">
									<input name="bedroomNumber" type="text" placeholder="침실 개수">
									<input name="bathroomNumber" type="text" placeholder="욕실 개수">
								</div>
							</div>
							<div>
								<p>숙소유형</p>
								<div class="flex between">
									<label for="homeType1" class="box-radio-input"><input name="homeType" type="radio" id="homeType1" value="apartment"><span>아파트</span></label>
									<label for="homeType2" class="box-radio-input"><input name="homeType" type="radio" id="homeType2" value="house"><span>주택</span></label>
									<label for="homeType3" class="box-radio-input"><input name="homeType" type="radio" id="homeType3" value="outhouse"><span>별채</span></label>
								</div>
							</div>
							<div>
								<p>편의시설</p>
								<div class="flex between">
									<label for="homeOption1" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption1" value="wifi"><span>WIFI</span></label>
									<label for="homeOption2" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption2" value="tv"><span>TV</span></label>
									<label for="homeOption3" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption3" value="washer"><span>세탁기</span></label>
								</div>
								<div class="flex between">
									<label for="homeOption4" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption4" value="parking"><span>주차장</span></label>
									<label for="homeOption5" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption5" value="pool"><span>수영장</span></label>
									<label for="homeOption6" class="box-radio-input"><input name="homeOption" type="checkbox" id="homeOption6" value="kitchen"><span>주방</span></label>
								</div>
							</div>
							<div>
								<p>숙소소개</p>
								<div class="home-intro flex between">
									<textarea name="homeIntro"></textarea>									
								</div>
							</div>
							<button type="submit">등록하기</button>
						</div>
					</form>	
				</div>
			</section>
			<script type="text/javascript">
				$("input:radio[id='homeType1']").prop('checked', true);
				
				window.onload = function(){
				    document.getElementById("address").addEventListener("click", function(){
				        new daum.Postcode({
				            oncomplete: function(data) {
				                var addr = '';
				                var extraAddr = '';

				              
				                if (data.userSelectedType === 'R') {
				                    addr = data.roadAddress;
				                } else {
				                    addr = data.jibunAddress;
				                }

				                if(data.userSelectedType === 'R'){
				                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
				                        extraAddr += data.bname;
				                    }
				                    if(data.buildingName !== '' && data.apartment === 'Y'){
				                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
				                    }
				                    if(extraAddr !== ''){
				                        extraAddr = ' (' + extraAddr + ')';
				                    }
				                    document.getElementById("extraAddress").value = extraAddr;
				                
				                } else {
				                    document.getElementById("extraAddress").value = '';
				                }

				                document.getElementById('postcode').value = data.zonecode;
				                document.getElementById("address").value = addr;
				                document.getElementById("detailAddress").focus();
				            }
				        }).open();
				    
				    });
				}
			</script>
		</main>
	
	</body>
</html>